<script src="/scripts/users.js" defer></script>
<div class="users-page-header">
	<h2>Search Users</h2>
	<button class="search-dropdown-btn" data-dropdown-search-form-btn>
		<svg
			xmlns="http://www.w3.org/2000/svg"
			width="16"
			height="16"
			fill="currentColor"
			viewBox="0 0 16 16"
			class="caret-down"
			data-caret-down
		>
			<path
				d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"
			/>
		</svg>
		<svg
			xmlns="http://www.w3.org/2000/svg"
			width="16"
			height="16"
			fill="currentColor"
			viewBox="0 0 16 16"
			class="caret-up"
			data-caret-up
		>
			<path
				d="M7.247 4.86l-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z"
			/>
		</svg>
	</button>
</div>
<form action="/users" method="GET" class="search-users-form" data-search-users-form>
	<div class="mb-2">
		<label for="name">Username</label>
		<input type="text" name="username" value="<%=searchOptions.username%>" class="mt-1" />
	</div>
	<button type="submit" class="btn btn-primary">Search</button>
</form>
<br />
<div class="users-display">
	<% users.forEach(user => { %>
	<div class="user-container">
		<div class="user-info">
			<svg
				xmlns="http://www.w3.org/2000/svg"
				fill="currentColor"
				class="bi bi-person-circle user-pic"
				viewBox="0 0 16 16"
			>
				<path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
				<path
					fill-rule="evenodd"
					d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"
				/>
			</svg>
			<div class="card-title"><a href="/users/<%= user.username %>" class="user-link"><%= user.username %></a></div>
		</div>
		<div class="user-details">
			<div><%= user.posts.length %> posts</div>
			<div>Member since <%= user.joinedAt.toLocaleDateString() %></div>
		</div>
	</div>
	<% }) %>
</div>
